[gcode_macro LOAD_TO_FSENSOR]
gcode:
    {% set val = printer["filament_sensor filament_sensor_T4"].filament_detected %}
    {% if val == 0 %}
        M83
        G1 E5 F300 # Move filament 5mm forwards
        RESPOND MSG="Waiting for fsensor"
        LOAD_TO_FSENSOR # Recursion
    {% else %}
        G1 E65 F300 # Move filament to nozzle
        RESPOND MSG="Filament Loaded"
    {% endif %}