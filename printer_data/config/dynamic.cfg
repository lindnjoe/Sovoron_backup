[gcode_macro LOAD_TO_FSENSOR1]
gcode:
    {% set val = printer["filament_switch_sensor filament_sensor_T4"].filament_detected %}
    {% if val == 0 %}
        SET_FILAMENT_SENSOR SENSOR=filament_sensor_T4 ENABLE=1
        M83
        G1 E5 F500 # Move filament 5mm forwards
        RESPOND MSG="Waiting for fsensor"
        LOAD_TO_FSENSOR # Recursion
    {% else %}
        G1 E65 F500 # Move filament to nozzle
        RESPOND MSG="Filament Loaded to lower sensor"
    {% endif %}

[gcode_macro LOAD_TO_FSENSOR2]
gcode:
    {% set val = printer["filament_switch_sensor filament_sensor_T8"].filament_detected %}
    {% if val == 0 %}
        SET_FILAMENT_SENSOR SENSOR=filament_sensor_T8 ENABLE=1
        M83
        G1 E5 F500 # Move filament 5mm forwards
        RESPOND MSG="Waiting for fsensor"
        LOAD_TO_FSENSOR # Recursion
    {% else %}
        G1 E65 F500 # Move filament to nozzle
        RESPOND MSG="Filament Loaded to upper sensor"
    {% endif %}

    